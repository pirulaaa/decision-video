<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Video Interactivo</title>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: system-ui, sans-serif;
}

body {
  background: black;
  min-height: 100vh;
  display: flex;
  justify-content: center;
}

#videoContainer {
  width: 100%;
  max-width: 1100px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* VIDEO */
#storyVideo {
  width: 100%;
  height: 80vh;              /* ðŸ‘ˆ 70% pantalla */
  object-fit: cover;
  background: black;
  border: 15px solid white;  
  padding: 5px;
  padding-right: -10px; /* ðŸ‘ˆ BORDE */
}

#playOverlay {
  position: absolute;
  top: 0;
  width: 100%;
  max-width: 1100px;
  height: 80vh;              /* ðŸ‘ˆ igual que el video */
  background: rgba(0,0,0,0.35);
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  transition: background 0.3s ease;
}

#playOverlay:hover {
  background: rgba(0,0,0,0.5);
}

#playIcon {
  font-size: 64px;
  color: black;
  background: rgba(255,255,255,0.85);
  width: 90px;
  height: 90px;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* OPCIONES */
#options {
  width: 100%;
  padding: 30px;
  display: none;
  flex-direction: column;
  align-items: center;
  gap: 20px;
}

/* CONTENEDOR DE BOTONES EN FILA */
#options button {
  min-width: 200px;
  padding: 14px 40px;
  font-size: 1rem;
  border: none;
  cursor: pointer;
  background: white;
}

/* FILA DE BOTONES */
#optionsButtons {
  display: flex;
  gap: 25px;
}

</style>
</head>

<body>

<div id="videoContainer">

  <video id="storyVideo"
    src="https://res.cloudinary.com/djjbo6x3d/video/upload/casi_todos_sabesmo_querer_rsz9wq.mp4"
    muted
    playsinline
    preload="auto">
  </video>

  <!-- Overlay play -->
  <div id="playOverlay">
    <div id="playIcon">â–¶</div>
  </div>

  <!-- Opciones -->
  <div id="options">
    <h2>Â¿QuÃ© decides?</h2>
    <div id="optionsButtons">
        <button onclick="choose(1)">OpciÃ³n A</button>
        <button onclick="choose(2)">OpciÃ³n B</button>
    </div>
  </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<script>
/* ========== EMAILJS ========== */
(function () {
  emailjs.init("qQHCYJL8PB-mcY-n0");
})();

/* ========== ELEMENTOS ========== */
const video = document.getElementById("storyVideo");
const playOverlay = document.getElementById("playOverlay");
const options = document.getElementById("options");
const optionsButtons = document.getElementById("optionsButtons");

/* ========== MÃšSICA ========== */
const music = new Audio("Start_Menu.mp3");
music.loop = true;
music.volume = 0.4;

/* ========== ESCENAS (ÃRBOL REAL) ========== */
const scenes = {
  intro: {
    video: "https://res.cloudinary.com/djjbo6x3d/video/upload/casi_todos_sabesmo_querer_rsz9wq.mp4",
    options: [
      { text: "OpciÃ³n A", next: "a1", label: "A" },
      { text: "OpciÃ³n B", next: "b1", label: "B" }
    ]
  },

  a1: {
    video: "https://res.cloudinary.com/djjbo6x3d/video/upload/video_katalina_sobihz.mp4",
    options: [
      { text: "OpciÃ³n C", next: "c1", label: "C" },
      { text: "OpciÃ³n D", next: "d1", label: "D" }
    ]
  },

  b1: {
    video: "https://res.cloudinary.com/djjbo6x3d/video/upload/B1.mp4",
    options: [
      { text: "OpciÃ³n E", next: "e1", label: "E" },
      { text: "OpciÃ³n F", next: "f1", label: "F" }
    ]
  },

  c1: {
    video: "https://res.cloudinary.com/djjbo6x3d/video/upload/C1.mp4",
    options: []
  },

  d1: {
    video: "https://res.cloudinary.com/djjbo6x3d/video/upload/D1.mp4",
    options: []
  },

  e1: {
    video: "https://res.cloudinary.com/djjbo6x3d/video/upload/E1.mp4",
    options: []
  },

  f1: {
    video: "https://res.cloudinary.com/djjbo6x3d/video/upload/F1.mp4",
    options: []
  }
};

let currentScene = "intro";

/* ========== OVERLAY ========== */
playOverlay.addEventListener("click", () => {
  playOverlay.style.display = "none";
  video.muted = false;
  video.play();
  music.play().catch(() => {});
});

/* ========== FIN VIDEO ========== */
video.addEventListener("ended", () => {
  showOptions();
});

/* ========== MOSTRAR OPCIONES ========== */
function showOptions() {
  optionsButtons.innerHTML = "";

  const scene = scenes[currentScene];

  if (scene.options.length === 0) return;

  scene.options.forEach(opt => {
    const btn = document.createElement("button");
    btn.textContent = opt.text;
    btn.onclick = () => choose(opt);
    optionsButtons.appendChild(btn);
  });

  options.style.display = "flex";
}

/* ========== ELEGIR ========== */
function choose(option) {
  options.style.display = "none";

  emailjs.send("service_n7hdppq", "template_wilvjop", {
    decision: option.label,
    escena: currentScene,
    fecha: new Date().toLocaleString(),
    to_email: "mati.veliz2003@gmail.com"
  }).catch(() => {});

  currentScene = option.next;
  video.src = scenes[currentScene].video;
  video.load();
  video.play();
}
</script>



</body>
</html>
