<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Video Interactivo</title>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: system-ui, sans-serif;
}

body {
  background: black;
  min-height: 100vh;
  display: flex;
  justify-content: center;
}

#videoContainer {
  width: 100%;
  max-width: 1100px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* VIDEO */
#storyVideo {
  width: 100%;
  height: 80vh;              /* üëà 70% pantalla */
  object-fit: cover;
  background: black;
  border: 15px solid white;  
  padding: 5px;
  padding-right: -10px; /* üëà BORDE */
}

#playOverlay {
  position: absolute;
  top: 0;
  width: 100%;
  max-width: 1100px;
  height: 80vh;              /* üëà igual que el video */
  background: rgba(0,0,0,0.35);
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  transition: background 0.3s ease;
}

#playOverlay:hover {
  background: rgba(0,0,0,0.5);
}

#playIcon {
  font-size: 64px;
  color: black;
  background: rgba(255,255,255,0.85);
  width: 90px;
  height: 90px;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* OPCIONES */
#options {
  width: 100%;
  padding: 30px;
  display: none;
  flex-direction: column;
  align-items: center;
  gap: 20px;
}

/* CONTENEDOR DE BOTONES EN FILA */
#options button {
  min-width: 200px;
  padding: 14px 40px;
  font-size: 1rem;
  border: none;
  cursor: pointer;
  background: white;
}

/* FILA DE BOTONES */
#optionsButtons {
  display: flex;
  gap: 25px;
}

</style>
</head>

<body>

<div id="videoContainer">

  <video id="storyVideo"
    src="https://res.cloudinary.com/djjbo6x3d/video/upload/casi_todos_sabesmo_querer_rsz9wq.mp4"
    muted
    playsinline
    preload="auto">
  </video>

  <!-- Overlay play -->
  <div id="playOverlay">
    <div id="playIcon">‚ñ∂</div>
  </div>

  <!-- Opciones -->
  <div id="options">
    <h2>¬øQu√© decides?</h2>
    <div id="optionsButtons">
        <button onclick="choose(1)">Opci√≥n A</button>
        <button onclick="choose(2)">Opci√≥n B</button>
    </div>
  </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>


<script>

(function () {
  emailjs.init("qQHCYJL8PB-mcY-n0");
})();


const video = document.getElementById("storyVideo");
const playOverlay = document.getElementById("playOverlay");
const options = document.getElementById("options");

/* M√∫sica local */
const music = new Audio("Start_Menu.mp3");
music.loop = true;
music.volume = 0.4;
music.addEventListener("canplaythrough", () => {
  console.log("üéµ M√∫sica cargada correctamente");
});

music.addEventListener("error", () => {
  console.error("‚ùå Error cargando Start_Menu.mp3");
});

/* Click inicial */
playOverlay.addEventListener("click", () => {
  playOverlay.style.display = "none";

  video.muted = false;
  video.play();

  music.currentTime = 0;
  music.play().catch(err => {
    console.log("Audio bloqueado:", err);
  });
});


/* Fin del video */
video.addEventListener("ended", () => {
  options.style.display = "flex";
});

/* Decisiones */
function choose(option) {
  options.style.display = "none";

  // üìß ENVIAR CORREO
  emailjs.send("service_n7hdppq", "template_wilvjop", {
    decision: option === 1 ? "Opci√≥n A" : "Opci√≥n B",
    pagina: "Video interactivo",
    fecha: new Date().toLocaleString(),
    to_email: "mati.veliz2003@gmail.com"
  }).then(() => {
    console.log("üì® Correo enviado");
  }).catch(err => {
    console.error("‚ùå Error enviando correo", err);
  });

  // üé¨ CAMBIAR VIDEO
  if (option === 1) {
    video.src = "https://res.cloudinary.com/djjbo6x3d/video/upload/video_katalina_sobihz.mp4";
  } else {
    video.src = "https://res.cloudinary.com/djjbo6x3d/video/upload/video_opcion2.mp4";
  }

  video.load();
  video.play();
}


</script>

</body>
</html>
